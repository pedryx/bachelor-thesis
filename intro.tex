\chapter{Úvod}

% obecnej uvod
    % component pattern
    % ecs
% ecs
    % 1. cast - co to je ecs
    % 2. cast - knihovny + mereni + co chceme delat
% cile
    % schrnuti cilu

Vytváření her je komplexní proces, který zahrnuje mnoho fází, včetně prototypování a iterací. Často se ocitneme v situaci, kdy je nezbytné výrazně upravit již existující kód. Z tohoto důvodu je klíčová vysoká flexibilita architektury kódu. Jedním z přístupů k řešení tohoto problému je využití návrhového vzoru Component, který poskytuje vysokou míru flexibility. Tento návrhový vzor je běžně používán v herních framework/engine, jako je například Unity (MonoBehavior) nebo MonoGame (GameComponent). Nicméně se v této práci zaměříme na jiný přístup, konkrétně na návrhový vzor Entity-Component-System (ECS).

\section{Entity-Component-System}
ECS je návrhový vzor často používaný při vývoji her. Jeho základními stavebními kameny jsou entity, komponenty a systémy.
\begin{enumerate}
    \item \textbf{Entita (Entity):} Reprezentuje objekt v herní scéně, může být cokoliv od hráče po strom nebo zvíře.
    \item \textbf{Komponenta (Component):} Entita je složena z komponent, které ji popisují. Komponenty obsahují pouze data a žádnou herní logiku. Například hráč může mít komponentu Control, která popisuje, jak se ovládá, strom může mít komponentu Resource, která popisuje, kolik dřeva hráč získá, pokud jej pokácí, a zvíře může mít komponentu PathFollow, která popisuje cestu, po které se pohybuje. Všechny tři entity mohou mít komponenty Appearance, která popisuje, jak daný objekt vypadá, a Position, popisující, kde se daný objekt nachází v herní scéně. Dále hráč a zvíře mohou mít komponentu Movement, popisující jejich pohyb.
    \item \textbf{Systém (System):} Obsahuje herní logiku. Systémy pracují nad určitou množinou komponent. V každé iteraci vezmou všechny entity obsahující tuto množinu komponent a provedou nad nimi určité operace. Například:
    \begin{itemize}
        \item \textbf{InputSystem:} Pracuje nad entitami s komponenty Control a Position, řídí logiku jejich ovládání.
        \item \textbf{PathMovementSystem:} Pracuje nad entitami s komponenty PathFollow a Movement, řídí logiku jejich pohybu po cestě.
        \item \textbf{RenderSystem:} Pracuje nad entitami s komponentou Appearance a řídí logiku jejich vykreslení.
    \end{itemize}
\end{enumerate}
ECS nejenže poskytuje vysokou flexibilitu, ale také vyniká v oblasti výkonu. Mezi cíle této práce bude patřit prozkoumat možnosti, které tento návrhový vzor přináší, a ukázat výhody, které nám ECS může poskytnout v porovnání s návrhovým vzorem Component.

\section{ECS knihovny}
Aby bylo možné efektivně využívat návrhový vzor ECS, je nezbytné implementovat odpovídající infrastrukturu. Samotná implementace této infrastruktury představuje obtížnou a časově náročnou úlohu, což vede mnoho vývojářů k volbě již existujících knihoven implementujících infrastrukturu pro tento návrhový vzor.

V této práci se budeme věnovat knihovnám pro programovací jazyk C\#, neboť se jedná o programovací jazyk běžně používaný pro hry a aplikace. I když se omezíme pouze na C\#, existuje velké množství těchto knihoven. Naštěstí existují následující projekty na platformě GitHub, které nám mohou pomoci při výběru vhodné knihovny:

\begin{enumerate}
    % (https://github.com/Chillu1/CSharpECSComparison)
    \item \textbf{CSharpECSComparison:} Porovnává ECS knihovny na základě vlastností a závislostí.
    % (https://github.com/Doraku/Ecs.CSharp.Benchmark)
    \item \textbf{Ecs.CSharp.Benchmark:} Provádí měření výkonu ECS knihoven.
\end{enumerate}
Ecs.CSharp.Benchmark porovnává ECS knihovny pouze na základě jednoduchých testů. Je však třeba zdůraznit, že v případě rozsáhlejšího projektu, například hry, se výsledky mohou lišit. Hlavním cílem této práce bude tedy vytvoření rozsáhlejší hry, která nejenže napomůže plnit výše zmíněné cíle, ale také umožní srovnávat různé knihovny poskytující implementaci tohoto návrhového vzoru.

\section{Abstrakční vrstva}
Vzhledem k tomu, že plánovanou hru budeme chtít využít k porovnávání různých ECS knihoven, je nezbytné navrhnout ji tak, aby fungovala nezávisle na konkrétní ECS knihovně. S ohledem na odlišné API jednotlivých ECS knihoven je nezbytné vytvořit abstrakční vrstvu pro ECS. Pro každou knihovnu, kterou budeme chtít porovnávat, poskytneme implementaci této vrstvy. Samotná hra poté pracuje s touto abstrakční vrstvou. Vytvoření takovéto vrstvy představuje náročný úkol, navzdory podobnosti rozhraní jednotlivých ECS knihoven. Významný rozdíl spočívá v rozhraní systémů, které se výrazně liší mezi jednotlivými knihovnami.

\section{Cíle práce}
Pro shrnutí, tato práce bude mít následující cíle:
\begin{enumerate}
    \item[h1)] Vytvořit hru pomocí ECS, která bude nezávislá na konkrétní ECS knihovně.
    \item[h2)] Pomocí vytvořené hry porovnat relativní výkon populárních ECS knihoven pro programovací jazyk C\#.
\end{enumerate}
S využitím této hry také budeme chtít:
\begin{enumerate}
    \item[v1)] Prozkoumat možnosti návrhového vzoru ECS.
    \item[v2)] Ukázat výhody, které nám ECS může nabídnout oproti návrhovému vzoru Component.
\end{enumerate}














\iffalse
\chapwithtoc{Introduction}

Introduction should answer the following questions, ideally in this order:
\begin{enumerate}
\item What is the nature of the problem the thesis is addressing?
\item What is the common approach for solving that problem now?
\item How this thesis approaches the problem?
\item What are the results? Did something improve?
\item What can the reader expect in the individual chapters of the thesis?
\end{enumerate}

Expected length of the introduction is between 1--4 pages. Longer introductions may require sub-sectioning with appropriate headings --- use \texttt{\textbackslash{}section*} to avoid numbering (with section names like `Motivation' and `Related work'), but try to avoid lengthy discussion of anything specific. Any ``real science'' (definitions, theorems, methods, data) should go into other chapters.
\todo{You may notice that this paragraph briefly shows different ``types'' of `quotes' in TeX, and the usage difference between a hyphen (-), en-dash (--) and em-dash (---).}

It is very advisable to skim through a book about scientific English writing before starting the thesis. I can recommend `\citetitle{glasman2010science}' by \citet{glasman2010science}.
\fi